{% extends 'admin_panel/base.html' %}
{% load humanize %}

{% block title %}{{ event.name }} - EventAdmin{% endblock %}

{% block extra_css %}
<style>
    /* Glass Panel Utility */
    .glass-panel {
        background: rgba(30, 41, 59, 0.4);
        backdrop-filter: blur(16px);
        border: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* Action Button Hover */
    .action-item:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: rgba(255, 255, 255, 0.1);
    }
</style>
{% endblock %}

{% block content %}
<div class="animate-fade-in-up relative">

    <div
        class="absolute top-0 right-0 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3 pointer-events-none">
    </div>

    <div class="mb-6">
        <a href="{% url 'admin_events_list' %}"
            class="inline-flex items-center text-sm text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5">
            <i class="fas fa-arrow-left mr-2"></i> Back to Events
        </a>
    </div>

    <div class="glass-panel rounded-2xl p-6 mb-8 relative overflow-hidden">
        <div
            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full animate-[shimmer_2s_infinite]">
        </div>

        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 relative z-10">
            <div>
                <h1 class="text-3xl font-bold text-white tracking-tight mb-2">{{ event.name }}</h1>
                <div class="flex flex-wrap items-center gap-3">
                    <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-blue-500/10 text-blue-400 border border-blue-500/20">
                        <i class="fas fa-calendar-alt mr-1.5"></i> {{ event.event_type|title|default:"Event" }}
                    </span>

                    <span class="inline-flex items-center text-sm text-slate-400">
                        <i class="far fa-clock mr-1.5 text-slate-500"></i>
                        {{ event.date|date:"F d, Y" }} at {{ event.time }}
                    </span>

                    {% if event.date >= today %}
                    <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-emerald-500/10 text-emerald-400 border border-emerald-500/20">
                        <i class="fas fa-check-circle mr-1.5"></i> Active
                    </span>
                    {% else %}
                    <span
                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-slate-500/10 text-slate-400 border border-slate-500/20">
                        <i class="fas fa-history mr-1.5"></i> Past Event
                    </span>
                    {% endif %}
                </div>
            </div>

            {% if event and event.id %}
            <div class="flex items-center gap-3">
                <a href="{% url 'edit_event' event.id %}"
                    class="px-5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white text-sm font-bold rounded-xl shadow-lg shadow-blue-500/20 transition-all flex items-center">
                    <i class="fas fa-edit mr-2"></i> Edit Event
                </a>
                <button
                    class="p-2.5 border border-white/10 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 transition-colors">
                    <i class="fas fa-ellipsis-v px-1"></i>
                </button>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <div class="lg:col-span-2 space-y-8">

            {% if event.image %}
            <div class="rounded-2xl overflow-hidden border border-white/5 shadow-2xl relative group">
                <div class="absolute inset-0 bg-gradient-to-t from-[#0f172a] via-transparent to-transparent opacity-60">
                </div>
                <img src="{{ event.image.url }}" alt="{{ event.name }}"
                    class="w-full h-64 md:h-80 object-cover transform group-hover:scale-105 transition-transform duration-700">

                <div class="absolute bottom-4 left-4 right-4 flex justify-between items-end">
                    <span
                        class="px-3 py-1 bg-black/50 backdrop-blur-md rounded-lg text-xs font-medium text-white border border-white/10">
                        <i class="fas fa-camera mr-1"></i> Cover Image
                    </span>
                </div>
            </div>
            {% endif %}

            <div class="glass-panel rounded-2xl p-6 md:p-8">
                <h3 class="text-lg font-bold text-white mb-6 border-b border-white/5 pb-4">Event Details</h3>

                <div class="prose prose-invert max-w-none mb-8">
                    <h4 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-2">Description</h4>
                    <p class="text-slate-300 leading-relaxed text-sm">
                        {{ event.description|linebreaksbr|default:"No description provided." }}
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-slate-800/50 rounded-xl p-4 border border-white/5">
                        <h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Location</h4>
                        <div class="flex items-start gap-3">
                            <div
                                class="w-10 h-10 rounded-lg bg-indigo-500/10 flex items-center justify-center flex-shrink-0 text-indigo-400">
                                <i class="fas fa-map-marker-alt text-lg"></i>
                            </div>
                            <div>
                                <p class="text-white font-medium">{{ event.location }}</p>
                                {% if event.address or event.city %}
                                <p class="text-xs text-slate-400 mt-1">
                                    {{ event.address }}{% if event.address and event.city %}, {% endif %}{{ event.city
                                    }}
                                </p>
                                {% endif %}
                                <a href="#" class="text-xs text-indigo-400 hover:text-indigo-300 mt-2 inline-block">View
                                    on Map &rarr;</a>
                            </div>
                        </div>
                    </div>

                    <div class="bg-slate-800/50 rounded-xl p-4 border border-white/5">
                        <h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Schedule</h4>
                        <div class="space-y-3">
                            <div class="flex items-center gap-3">
                                <div
                                    class="w-8 h-8 rounded-lg bg-slate-700/50 flex items-center justify-center text-slate-400">
                                    <i class="far fa-calendar"></i>
                                </div>
                                <div>
                                    <p class="text-sm text-slate-200">{{ event.date|date:"l, F d, Y" }}</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div
                                    class="w-8 h-8 rounded-lg bg-slate-700/50 flex items-center justify-center text-slate-400">
                                    <i class="far fa-clock"></i>
                                </div>
                                <div>
                                    <p class="text-sm text-slate-200">{{ event.time }}</p>
                                    {% if event.duration %}
                                    <p class="text-[10px] text-slate-500">Duration: {{ event.duration }}</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="space-y-6">

            <div class="glass-panel rounded-2xl p-6 relative overflow-hidden">
                <div
                    class="absolute top-0 right-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none">
                </div>

                <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-6">Ticket Information</h3>

                <div class="space-y-5">
                    <div class="flex justify-between items-end border-b border-white/5 pb-4">
                        <span class="text-slate-400 text-xs font-medium">Price per Ticket</span>
                        <span class="text-2xl font-bold text-white">₹{{ event.ticket_price|floatformat:2|intcomma }}</span>
                    </div>

                    <div class="space-y-2">
                        <div class="flex justify-between text-xs text-slate-400">
                            <span>Capacity</span>
                            <span class="text-white">{{ event.total_seats }} Seats</span>
                        </div>
                        <div class="w-full bg-slate-700/50 rounded-full h-2">
                            <div class="bg-blue-500 h-2 rounded-full"
                                style="width: {{ event.booking_percentage|default:0 }}%"></div>
                        </div>
                        <div class="flex justify-between text-[10px] text-slate-500">
                            <span>{{ event.booked_seats }} Booked</span>
                            <span class="text-emerald-400">{{ event.available_seats }} Available</span>
                        </div>
                    </div>

                    <div class="flex items-center justify-between pt-2">
                        <span class="text-xs text-slate-400">Current Status</span>
                        {% if event.is_sold_out %}
                        <span
                            class="px-3 py-1 rounded-lg bg-red-500/10 text-red-400 text-xs font-bold border border-red-500/20">Sold
                            Out</span>
                        {% elif event.available_seats < 10 %} <span
                            class="px-3 py-1 rounded-lg bg-amber-500/10 text-amber-400 text-xs font-bold border border-amber-500/20">
                            Filling Fast</span>
                            {% else %}
                            <span
                                class="px-3 py-1 rounded-lg bg-emerald-500/10 text-emerald-400 text-xs font-bold border border-emerald-500/20">Available</span>
                            {% endif %}
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="glass-panel p-4 rounded-xl text-center">
                    <div class="text-2xl font-bold text-purple-400 mb-1">{{ event.booking_percentage|floatformat:0 }}%
                    </div>
                    <div class="text-[10px] text-slate-500 uppercase font-bold">Occupancy</div>
                </div>
                <div class="glass-panel p-4 rounded-xl text-center">
                    <div class="text-2xl font-bold text-green-400 mb-1">₹{{ event.ticket_price|default:0 }}</div>
                    <div class="text-[10px] text-slate-500 uppercase font-bold">Revenue/Tkt</div>
                </div>
            </div>

            <div class="glass-panel rounded-2xl p-6">
                <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-4">Quick Actions</h3>

                <div class="space-y-2">
                    <a href="{% url 'edit_event' event.id %}"
                        class="action-item flex items-center justify-between p-3 rounded-xl border border-white/5 transition-all group cursor-pointer text-slate-300 hover:text-white">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400">
                                <i class="fas fa-pen text-xs"></i>
                            </div>
                            <span class="text-sm font-medium">Edit Details</span>
                        </div>
                        <i class="fas fa-chevron-right text-xs text-slate-600 group-hover:text-slate-400"></i>
                    </a>

                    <a href="#"
                        class="action-item flex items-center justify-between p-3 rounded-xl border border-white/5 transition-all group cursor-pointer text-slate-300 hover:text-white">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center text-purple-400">
                                <i class="fas fa-chart-pie text-xs"></i>
                            </div>
                            <span class="text-sm font-medium">View Analytics</span>
                        </div>
                        <i class="fas fa-chevron-right text-xs text-slate-600 group-hover:text-slate-400"></i>
                    </a>

                    <a href="#"
                        class="action-item flex items-center justify-between p-3 rounded-xl border border-white/5 transition-all group cursor-pointer text-slate-300 hover:text-white">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center text-green-400">
                                <i class="fas fa-share-alt text-xs"></i>
                            </div>
                            <span class="text-sm font-medium">Share Event</span>
                        </div>
                        <i class="fas fa-chevron-right text-xs text-slate-600 group-hover:text-slate-400"></i>
                    </a>

                    <div class="pt-2">
                        <button
                            class="w-full action-item flex items-center justify-center gap-2 p-3 rounded-xl border border-red-500/20 text-red-400 hover:bg-red-500/10 transition-all font-medium text-sm">
                            <i class="fas fa-trash-alt"></i> Delete Event
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}